{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC2\\\\Desktop\\\\_blgashLMS\\\\frontend\\\\src\\\\components\\\\WordAdmin\\\\AddWord\\\\data.js\",\n    _s = $RefreshSig$();\n\nimport wordApi from \"apis/wordApi\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\"; // import { messageReducer } from '/src/redux/reducers/messageReducer';\n\nimport WordContribution from \"./index\";\nimport { setMessage } from \"redux/actions/messageAction\"; //import messageReducer from 'redux/reducers/messageReducer';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst analysisExample = function () {\n  let exampleStr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n  let word = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n\n  if (typeof exampleStr !== \"string\" || exampleStr === \"\") {\n    return [];\n  }\n\n  const exampleArr = exampleStr.split(\"\\n\");\n\n  for (let str of exampleArr) {\n    if (str.toLocaleLowerCase().indexOf(word.toLocaleLowerCase()) === -1) {\n      return false;\n    }\n  }\n\n  return exampleArr;\n};\n\nfunction WordContributionData() {\n  _s();\n\n  const [submitting, setSubmitting] = useState(false);\n  const dispatch = useDispatch();\n\n  const handleSubmit = async data => {\n    try {\n      setSubmitting(true);\n      const {\n        examples,\n        synonyms,\n        antonyms,\n        word,\n        phonetic,\n        ...rest\n      } = data; // check examples validation\n\n      const exampleArr = analysisExample(examples, word);\n\n      if (typeof exampleArr === \"boolean\" && !exampleArr) {\n        dispatch(setMessage(\"Example sentences must contain new vocabulary.\", \"warning\"));\n        setSubmitting(false);\n        return;\n      } // split synonyms string to an array synonyms\n\n\n      const synonymArr = synonyms !== \"\" ? synonyms.split(\"\\n\") : []; // split antonyms string to an array synonyms\n\n      const antonymArr = antonyms !== \"\" ? antonyms.split(\"\\n\") : []; // call API\n\n      const dataSend = { ...rest,\n        examples: exampleArr,\n        synonyms: synonymArr,\n        antonyms: antonymArr,\n        word,\n        phonetic: phonetic.replaceAll(\"/\", \"\")\n      };\n      const apiRes = await wordApi.postWord(dataSend);\n\n      if (apiRes) {\n        dispatch(setMessage(\"Created word successfully\", \"success\"));\n        setSubmitting(false);\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n\n      const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Error, can not create word\";\n      dispatch(setMessage(message, \"error\"));\n      setSubmitting(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(WordContribution, {\n    onSubmitForm: handleSubmit,\n    submitting: submitting\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_s(WordContributionData, \"5iB+qujXnQj6jBoSGKljUlKKZP8=\", false, function () {\n  return [useDispatch];\n});\n\n_c = WordContributionData;\nexport default WordContributionData;\n\nvar _c;\n\n$RefreshReg$(_c, \"WordContributionData\");","map":{"version":3,"names":["wordApi","React","useState","useEffect","useDispatch","useSelector","WordContribution","setMessage","analysisExample","exampleStr","word","exampleArr","split","str","toLocaleLowerCase","indexOf","WordContributionData","submitting","setSubmitting","dispatch","handleSubmit","data","examples","synonyms","antonyms","phonetic","rest","synonymArr","antonymArr","dataSend","replaceAll","apiRes","postWord","error","message","response"],"sources":["C:/Users/PC2/Desktop/_blgashLMS/frontend/src/components/WordAdmin/AddWord/data.js"],"sourcesContent":["import wordApi from \"apis/wordApi\";\nimport React, { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n// import { messageReducer } from '/src/redux/reducers/messageReducer';\nimport WordContribution from \"./index\";\nimport { setMessage } from \"redux/actions/messageAction\";\n//import messageReducer from 'redux/reducers/messageReducer';\n\nconst analysisExample = (exampleStr = \"\", word = \"\") => {\n  if (typeof exampleStr !== \"string\" || exampleStr === \"\") {\n    return [];\n  }\n\n  const exampleArr = exampleStr.split(\"\\n\");\n  for (let str of exampleArr) {\n    if (str.toLocaleLowerCase().indexOf(word.toLocaleLowerCase()) === -1) {\n      return false;\n    }\n  }\n\n  return exampleArr;\n};\n\nfunction WordContributionData() {\n  const [submitting, setSubmitting] = useState(false);\n  const dispatch = useDispatch();\n\n  const handleSubmit = async (data) => {\n    try {\n      setSubmitting(true);\n      const { examples, synonyms, antonyms, word, phonetic, ...rest } = data;\n\n      // check examples validation\n      const exampleArr = analysisExample(examples, word);\n      if (typeof exampleArr === \"boolean\" && !exampleArr) {\n        dispatch(setMessage(\"Example sentences must contain new vocabulary.\", \"warning\"));\n        setSubmitting(false);\n        return;\n      }\n\n      // split synonyms string to an array synonyms\n      const synonymArr = synonyms !== \"\" ? synonyms.split(\"\\n\") : [];\n\n      // split antonyms string to an array synonyms\n      const antonymArr = antonyms !== \"\" ? antonyms.split(\"\\n\") : [];\n\n      // call API\n      const dataSend = {\n        ...rest,\n        examples: exampleArr,\n        synonyms: synonymArr,\n        antonyms: antonymArr,\n        word,\n        phonetic: phonetic.replaceAll(\"/\", \"\"),\n      };\n      const apiRes = await wordApi.postWord(dataSend);\n      if (apiRes) {\n        dispatch(setMessage(\"Created word successfully\", \"success\"));\n        setSubmitting(false);\n      }\n    } catch (error) {\n      const message =\n        error.response?.data?.message || \"Error, can not create word\";\n      dispatch(setMessage(message, \"error\"));\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <WordContribution onSubmitForm={handleSubmit} submitting={submitting} />\n  );\n}\n\nexport default WordContributionData;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}