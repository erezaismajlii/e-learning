{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC2\\\\Desktop\\\\_blgashLMS\\\\frontend\\\\src\\\\components\\\\PlayGames\\\\Result.js\",\n    _s = $RefreshSig$();\n\nimport Button from '@material-ui/core/Button';\nimport WrongIcon from '@material-ui/icons/Cancel';\nimport RightIcon from '@material-ui/icons/CheckCircle';\nimport CoinIcon from '@material-ui/icons/MonetizationOn';\nimport userApi from 'apis/userApi';\nimport highScoreApi from 'apis/highScoreApi';\nimport winAudioSrc from 'assets/audios/win.mp3';\nimport cupIcon from 'assets/icons/others/cup.png';\nimport { COINS, MAX, ROUTES } from 'constants/index';\nimport { HIGHSCORE_NAME } from 'constants/game';\nimport { onPlayAudio } from 'helper/speakerHelper';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { setUserCoin } from 'redux/actions/authAction';\nimport { cwResultStyle } from './CorrectWord/style';\nimport { string } from 'yup/lib/locale';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction convertQuesToCoin() {\n  let nRight = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  let nWrong = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  let currentCoin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  const newCoin = nRight * COINS.CORRECT_GAME_PER_QUES - nWrong * COINS.CORRECT_GAME_PER_QUES + currentCoin;\n\n  if (newCoin < 0) {\n    return 0;\n  }\n\n  if (newCoin > MAX.USER_COIN) {\n    return MAX.USER_COIN;\n  }\n\n  return newCoin;\n}\n\nfunction CorrectWordResult(_ref) {\n  _s();\n\n  let {\n    nRight,\n    nWrong,\n    onReplay,\n    nameGame\n  } = _ref;\n  const classes = cwResultStyle();\n  const history = useHistory();\n  const [coinCurrent, setCoinCurrent] = useState(null);\n  const {\n    isAuth,\n    coin\n  } = useSelector(state => state.authReducer); // play win audio\n\n  useEffect(() => {\n    onPlayAudio(winAudioSrc);\n  }, []); // save coin and update highscore\n\n  useEffect(() => {\n    if (!isAuth) return;\n\n    (async function () {\n      try {\n        const userInfo = await userApi.getUserInfo();\n        const newCoin = convertQuesToCoin(nRight, nWrong, userInfo.data.user.coin);\n        console.log(userInfo.data.user.coin);\n        setCoinCurrent(newCoin);\n        const apiRes = await userApi.putUpdateUserCoin(newCoin);\n        highScoreApi.postScore(nameGame, nRight); // }\n        // if(nameGame !== HIGHSCORE_NAME.TOP_COIN){\n        //  console.log(resApi)\n        //  }\n        //  const gameCoin =  nRight * COINS.CORRECT_GAME_PER_QUES -\n        //  nWrong * COINS.CORRECT_GAME_PER_QUES ;\n        //   highScoreApi.putUpdateHighscore(HIGHSCORE_NAME.TOP_COIN, newCoin);\n        //   highScoreApi.putUpdateHighscore(\n        //     HIGHSCORE_NAME.CORRECT_GAME_RIGHT,\n        //     nRight,\n        //   );\n        //   highScoreApi.putUpdateHighscore(\n        //     HIGHSCORE_NAME.CORRECT_GAME_RIGHT_CONSECUTIVE,\n        //     nRightConsecutive,\n        //   );\n      } catch (error) {}\n    })();\n  }, []);\n\n  const onGoBack = () => {\n    history.push(ROUTES.GAMES_HOME);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${classes.root} flex-center-col`,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: classes.img,\n      src: cupIcon,\n      alt: \"Cup Photo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${classes.result} flex-center--ver`,\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: nRight\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), \"\\xA0Right\", /*#__PURE__*/_jsxDEV(RightIcon, {\n        className: `${classes.icon} right`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), \"\\xA0-\\xA0\", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: nWrong\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), \"\\xA0Wrong\", /*#__PURE__*/_jsxDEV(WrongIcon, {\n        className: `${classes.icon} wrong`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), isAuth && coinCurrent && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${classes.result} flex-center--ver mt-4`,\n      children: [/*#__PURE__*/_jsxDEV(CoinIcon, {\n        className: classes.icon,\n        style: {\n          color: '#C3AD1A',\n          marginLeft: 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), \"Current number of coins:\\xA0\", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: coinCurrent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 41\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-10\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        className: \"_btn _btn-outlined-stand mr-5\",\n        variant: \"outlined\",\n        onClick: onGoBack,\n        children: \"Return\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"_btn _btn-primary\",\n        onClick: onReplay,\n        children: \"Ch\\u01A1i l\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CorrectWordResult, \"6GcxzV/QVY+buBaz5whxsQi/U2w=\", false, function () {\n  return [useHistory, useSelector];\n});\n\n_c = CorrectWordResult;\nCorrectWordResult.propTypes = {\n  nRight: PropTypes.number,\n  nWrong: PropTypes.number,\n  nameGame: PropTypes.string,\n  onReplay: PropTypes.func\n};\nCorrectWordResult.defaultProps = {\n  nRight: 0,\n  nWrong: 0,\n  nameGame: '',\n  onReplay: function () {}\n};\nexport default CorrectWordResult;\n\nvar _c;\n\n$RefreshReg$(_c, \"CorrectWordResult\");","map":{"version":3,"names":["Button","WrongIcon","RightIcon","CoinIcon","userApi","highScoreApi","winAudioSrc","cupIcon","COINS","MAX","ROUTES","HIGHSCORE_NAME","onPlayAudio","PropTypes","React","useEffect","useState","useDispatch","useSelector","useHistory","setUserCoin","cwResultStyle","string","convertQuesToCoin","nRight","nWrong","currentCoin","newCoin","CORRECT_GAME_PER_QUES","USER_COIN","CorrectWordResult","onReplay","nameGame","classes","history","coinCurrent","setCoinCurrent","isAuth","coin","state","authReducer","userInfo","getUserInfo","data","user","console","log","apiRes","putUpdateUserCoin","postScore","error","onGoBack","push","GAMES_HOME","root","img","result","icon","color","marginLeft","propTypes","number","func","defaultProps"],"sources":["C:/Users/PC2/Desktop/_blgashLMS/frontend/src/components/PlayGames/Result.js"],"sourcesContent":["import Button from '@material-ui/core/Button';\nimport WrongIcon from '@material-ui/icons/Cancel';\nimport RightIcon from '@material-ui/icons/CheckCircle';\nimport CoinIcon from '@material-ui/icons/MonetizationOn';\nimport userApi from 'apis/userApi';\nimport highScoreApi from 'apis/highScoreApi';\nimport winAudioSrc from 'assets/audios/win.mp3';\nimport cupIcon from 'assets/icons/others/cup.png';\nimport { COINS, MAX, ROUTES } from 'constants/index';\nimport { HIGHSCORE_NAME } from 'constants/game';\nimport { onPlayAudio } from 'helper/speakerHelper';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { setUserCoin } from 'redux/actions/authAction';\nimport { cwResultStyle } from './CorrectWord/style';\nimport { string } from 'yup/lib/locale';\n\nfunction convertQuesToCoin(nRight = 0, nWrong = 0, currentCoin = 0) {\n  const newCoin =\n    nRight * COINS.CORRECT_GAME_PER_QUES -\n    nWrong * COINS.CORRECT_GAME_PER_QUES +\n    currentCoin;\n\n  if (newCoin < 0) {\n    return 0;\n  }\n  if (newCoin > MAX.USER_COIN) {\n    return MAX.USER_COIN;\n  }\n  return newCoin;\n}\n\nfunction CorrectWordResult({ nRight, nWrong, onReplay, nameGame}) {\n  const classes = cwResultStyle();\n  const history = useHistory();\n  const [coinCurrent, setCoinCurrent]=useState(null);\n  const { isAuth, coin } = useSelector((state) => state.authReducer);\n\n  // play win audio\n  useEffect(() => {\n    onPlayAudio(winAudioSrc);\n  }, []);\n\n  // save coin and update highscore\n  useEffect(() => {\n    if (!isAuth) return;\n\n    (async function () {\n      try {\n        const userInfo = await userApi.getUserInfo();\n        const newCoin = convertQuesToCoin(nRight, nWrong, userInfo.data.user.coin);\n\n      console.log(userInfo.data.user.coin)\n        \n        setCoinCurrent(newCoin)\n        const apiRes = await userApi.putUpdateUserCoin(newCoin);\n           highScoreApi.postScore(nameGame, nRight);\n        // }\n       \n       // if(nameGame !== HIGHSCORE_NAME.TOP_COIN){\n         \n       \n      //  console.log(resApi)\n      //  }\n      //  const gameCoin =  nRight * COINS.CORRECT_GAME_PER_QUES -\n      //  nWrong * COINS.CORRECT_GAME_PER_QUES ;\n      //   highScoreApi.putUpdateHighscore(HIGHSCORE_NAME.TOP_COIN, newCoin);\n\n      //   highScoreApi.putUpdateHighscore(\n      //     HIGHSCORE_NAME.CORRECT_GAME_RIGHT,\n      //     nRight,\n      //   );\n\n      //   highScoreApi.putUpdateHighscore(\n      //     HIGHSCORE_NAME.CORRECT_GAME_RIGHT_CONSECUTIVE,\n      //     nRightConsecutive,\n      //   );\n      \n      } catch (error) {}\n    })();\n  }, []);\n\n  const onGoBack = () => {\n    history.push(ROUTES.GAMES_HOME);\n  };\n\n  return (\n    <div className={`${classes.root} flex-center-col`}>\n      <img className={classes.img} src={cupIcon} alt=\"Cup Photo\" />\n\n      <div className={`${classes.result} flex-center--ver`}>\n        <b>{nRight}</b>&nbsp;Right\n        <RightIcon className={`${classes.icon} right`} />\n        &nbsp;-&nbsp;\n        <b>{nWrong}</b>&nbsp;Wrong\n        <WrongIcon className={`${classes.icon} wrong`} />\n      </div>\n\n      {isAuth && coinCurrent && (\n        <div className={`${classes.result} flex-center--ver mt-4`}>\n          <CoinIcon\n            className={classes.icon}\n            style={{ color: '#C3AD1A', marginLeft: 0 }}\n          />\n          Current number of coins:&nbsp;<b>{coinCurrent}</b>\n        </div>\n      )}\n\n      <div className=\"mt-10\">\n        <Button\n          className=\"_btn _btn-outlined-stand mr-5\"\n          variant=\"outlined\"\n          onClick={onGoBack}>\n          Return\n        </Button>\n        <Button className=\"_btn _btn-primary\" onClick={onReplay}>\n          Chơi lại\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nCorrectWordResult.propTypes = {\n  nRight: PropTypes.number,\n  nWrong: PropTypes.number,\n nameGame: PropTypes.string,\n  onReplay: PropTypes.func,\n};\n\nCorrectWordResult.defaultProps = {\n  nRight: 0,\n  nWrong: 0,\n  nameGame:'',\n  onReplay: function () {},\n};\n\nexport default CorrectWordResult;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}